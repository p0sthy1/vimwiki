[[http://coolshell.cn/articles/9070.html |学习资料google]]
awk输出指定行之外的所有行
awk '{for(i=2;i<=NF;++i) if(i!=X)printf $i "\t";printf "\n"}'
http://521cto.blog.51cto.com/950229/945683 awk多文件处理

{{{
awk -F \| 'NR==FNR { a[$2]=$0; next } { print a[$1]"|"$2 }' account cdr
解释：第一次出现的a[$2]是将文件a中的$2作为哈希数组的下标使用，并用本行数据填充
      第二次出现的a[$1]是将文件b中的$1作为参数访问数组a，此时放入$1得到数组中索引为$1的值

'NR==FNR { a[$2]=$0; next } NR!=FNR{if($1 in a){print}}'
if($1 in a){print}这一句的意思是如果文件2的第一列值在数组a的下标中，a这里是下标的集合

例：将文件sfz.txt中的身份证号与区域划bianma.txt分对应
sfz.txt
# 522401 522401198508292031 
# 522402 522402198508292031 
# 522403 522403198508292031 
# 522404 522404198508292031 
# 522405 522405198508292031 

# 110000 北京市
# 110100 北京市市辖区
# 110101 北京市东城区
# 110102 北京市西城区
# 110103 北京市崇文区
# 110104 北京市宣武区
# 110105 北京市朝阳区
awk -F " " 'FNR==NR{a[$1]=$2} FNR!=NR {if($1 in a){print $2" "a[$1]}}' bianma.txt sfz.txt 
得到这样的结果
522401198508292031  贵州省毕节市 

统计出各个地区的人数
    awk '{a[$2]++} END{for(i in a){print i,a[i]}}' filename |sort -nk2
找出重复的身份证
    awk '{a[身份证所在列]++} END{for(i in a){if(a[i]!=1){print $0}}} filename
针对第i列不重复输出
    awk '!a[$i]++' filename
http://blog.sina.com.cn/s/blog_4a033b090100xo2b.html awk使用正则替换的例子

解决名字关联身份证和分数
$ head namelist origin.txt 
==> namelist <==
吴倩 522401199602270423
葛丹妮 522401199407250021
江宜芯 52240119960703952X
汪丽 522401199502270426
陈梦 522428199509191069
姜星 520221199511084388
胡忍 522422199301066420
徐银灿 522401199503269240
梁德梅 522427199608235825
胡靖 522427199509245825

==> origin.txt <==
成秋 女 14240219920315122X 9004毕节市幼儿园 04工作人员 毕节五小（清毕南路16号） 10124051517 公共基础知识
张二 男 37131119861119231X 9002毕节市公安局警务服务中心 2警务辅助人员 毕节四小（公园路56号） 10124030820 公共基础知识
唐明 男 41132319880602631X 9005毕节市质量技术监督检测所 01检验员 毕节市实验学校（南部新区望湖路碧阳国际城内） 10124043013 公共基础知识
余艺 女 43092119910118792X 9004毕节市幼儿园 02工作人员 毕节五小（清毕南路16号） 10124052305 公共基础知识
钟芳 女 50024019940131490X 9004毕节市幼儿园 01工作人员 毕节五小（清毕南路16号） 10124052325 公共基础知识
唐玲 女 50038319930420160X 9004毕节市幼儿园 05工作人员 毕节六小（双井路43号） 10124060106 公共基础知识
赵姜 女 51052219891229194X 9004毕节市幼儿园 05工作人员 毕节六小（双井路43号） 10124060827 公共基础知识
甘丹 女 51052519941203342X 9005毕节市质量技术监督检测所 02检定员 毕节市实验学校（南部新区望湖路碧阳国际城内） 10124041402 公共基础知识
何钳 女 51112419840119682X 9004毕节市幼儿园 07工作人员 毕节六小（双井路43号） 10124061704 公共基础知识
彭章 女 52012119880615382X 9001毕节市妇幼保健计划生育服务中心 3护士 毕节二小（松山路15号） 10124010229 公共基础知识
awk 'NR==FNR{a[$2]=$1} NR!=FNR{print a[$3],$0}' namelist origin.txt
}}}
